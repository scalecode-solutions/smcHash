"use strict";
/**
 * smcHash - High-performance hash function
 *
 * Passes all 188 SMHasher3 quality tests. Includes a PRNG that passes BigCrush/PractRand.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.smchash = smchash;
exports.smchashSeeded = smchashSeeded;
exports.smcRand = smcRand;
exports.stringToBytes = stringToBytes;
// Secret constants: odd, 32 bits set, pairwise hamming distance = 32, prime
const SMC_SECRET = [
    0x9ad1e8e2aa5a5c4bn,
    0xaaaad2335647d21bn,
    0xb8ac35e269d1b495n,
    0xa98d653cb2b4c959n,
    0x71a5b853b43ca68bn,
    0x2b55934dc35c9655n,
    0x746ae48ed4d41e4dn,
    0xa3d8c38e78aaa6a9n,
    0x1bca69c565658bc3n,
];
const MASK64 = 0xffffffffffffffffn;
/** 128-bit multiply, XOR high and low halves */
function mix(a, b) {
    const r = a * b;
    return ((r & MASK64) ^ (r >> 64n)) & MASK64;
}
/** Multiply-update-mix: returns [lo ^ hi, hi] */
function mum(a, b) {
    const r = a * b;
    const lo = r & MASK64;
    const hi = (r >> 64n) & MASK64;
    return [(lo ^ hi), hi];
}
/** Read little-endian uint64 from DataView */
function read64(view, offset) {
    const lo = BigInt(view.getUint32(offset, true));
    const hi = BigInt(view.getUint32(offset + 4, true));
    return lo | (hi << 32n);
}
/** Read little-endian uint32 from DataView */
function read32(view, offset) {
    return BigInt(view.getUint32(offset, true));
}
/** Compute smcHash of the given data */
function smchash(data) {
    return smchashSeeded(data, SMC_SECRET[0]);
}
/** Compute smcHash with a custom seed */
function smchashSeeded(data, seed) {
    const length = data.length;
    const view = new DataView(data.buffer, data.byteOffset, data.byteLength);
    seed &= MASK64;
    if (length <= 16) {
        seed ^= mix(seed ^ SMC_SECRET[0], SMC_SECRET[1] ^ BigInt(length));
        let a, b;
        if (length >= 4) {
            if (length >= 8) {
                a = read64(view, 0);
                b = read64(view, length - 8);
            }
            else {
                a = read32(view, 0);
                b = read32(view, length - 4);
            }
        }
        else if (length > 0) {
            a = (BigInt(data[0]) << 56n) | (BigInt(data[length >> 1]) << 32n) | BigInt(data[length - 1]);
            b = 0n;
        }
        else {
            a = 0n;
            b = 0n;
        }
        a = (a ^ SMC_SECRET[1]) & MASK64;
        b = (b ^ seed) & MASK64;
        [a, b] = mum(a, b);
        return mix(a ^ SMC_SECRET[8], b ^ SMC_SECRET[1] ^ BigInt(length));
    }
    seed ^= mix(seed ^ SMC_SECRET[2], SMC_SECRET[1]);
    let i = length;
    let offset = 0;
    // Bulk: 8 lanes = 128 bytes = 2 cache lines
    if (length > 128) {
        let see1 = seed, see2 = seed, see3 = seed, see4 = seed;
        let see5 = seed, see6 = seed, see7 = seed;
        while (i > 128) {
            seed = mix(read64(view, offset) ^ SMC_SECRET[0], read64(view, offset + 8) ^ seed);
            see1 = mix(read64(view, offset + 16) ^ SMC_SECRET[1], read64(view, offset + 24) ^ see1);
            see2 = mix(read64(view, offset + 32) ^ SMC_SECRET[2], read64(view, offset + 40) ^ see2);
            see3 = mix(read64(view, offset + 48) ^ SMC_SECRET[3], read64(view, offset + 56) ^ see3);
            see4 = mix(read64(view, offset + 64) ^ SMC_SECRET[4], read64(view, offset + 72) ^ see4);
            see5 = mix(read64(view, offset + 80) ^ SMC_SECRET[5], read64(view, offset + 88) ^ see5);
            see6 = mix(read64(view, offset + 96) ^ SMC_SECRET[6], read64(view, offset + 104) ^ see6);
            see7 = mix(read64(view, offset + 112) ^ SMC_SECRET[7], read64(view, offset + 120) ^ see7);
            offset += 128;
            i -= 128;
        }
        seed ^= see1 ^ see4 ^ see5;
        see2 ^= see3 ^ see6 ^ see7;
        seed ^= see2;
    }
    if (i > 64) {
        seed = mix(read64(view, offset) ^ SMC_SECRET[0], read64(view, offset + 8) ^ seed);
        seed = mix(read64(view, offset + 16) ^ SMC_SECRET[1], read64(view, offset + 24) ^ seed);
        seed = mix(read64(view, offset + 32) ^ SMC_SECRET[2], read64(view, offset + 40) ^ seed);
        seed = mix(read64(view, offset + 48) ^ SMC_SECRET[3], read64(view, offset + 56) ^ seed);
        offset += 64;
        i -= 64;
    }
    if (i > 32) {
        seed = mix(read64(view, offset) ^ SMC_SECRET[0], read64(view, offset + 8) ^ seed);
        seed = mix(read64(view, offset + 16) ^ SMC_SECRET[1], read64(view, offset + 24) ^ seed);
        offset += 32;
        i -= 32;
    }
    if (i > 16) {
        seed = mix(read64(view, offset) ^ SMC_SECRET[0], read64(view, offset + 8) ^ seed);
    }
    let a = read64(view, length - 16) ^ BigInt(length);
    let b = read64(view, length - 8);
    a = (a ^ SMC_SECRET[1]) & MASK64;
    b = (b ^ seed) & MASK64;
    [a, b] = mum(a, b);
    return mix(a ^ SMC_SECRET[8], b ^ SMC_SECRET[1] ^ BigInt(length));
}
/** PRNG - passes BigCrush and PractRand */
function smcRand(seed) {
    seed.value = (seed.value + SMC_SECRET[0]) & MASK64;
    return mix(seed.value, seed.value ^ SMC_SECRET[1]);
}
/** Helper to convert string to Uint8Array */
function stringToBytes(str) {
    return new TextEncoder().encode(str);
}
// Test when run directly
if (typeof require !== 'undefined' && require.main === module) {
    const data = stringToBytes("Hello, World!");
    const h = smchash(data);
    console.log(`smchash('Hello, World!') = 0x${h.toString(16)}`);
    const expected = 0x25bb0982c5c0de6en;
    if (h !== expected) {
        console.error(`FAIL: Expected 0x${expected.toString(16)}, got 0x${h.toString(16)}`);
        process.exit(1);
    }
    const h2 = smchashSeeded(data, 12345n);
    console.log(`smchashSeeded('Hello, World!', 12345) = 0x${h2.toString(16)}`);
    const expected2 = 0xd26cb494f911af5bn;
    if (h2 !== expected2) {
        console.error(`FAIL: Expected 0x${expected2.toString(16)}, got 0x${h2.toString(16)}`);
        process.exit(1);
    }
    console.log("All tests passed!");
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic21jaGFzaC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NtY2hhc2gudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBNENILDBCQUVDO0FBR0Qsc0NBbUZDO0FBR0QsMEJBR0M7QUFHRCxzQ0FFQztBQTdJRCw0RUFBNEU7QUFDNUUsTUFBTSxVQUFVLEdBQUc7SUFDZixtQkFBbUI7SUFDbkIsbUJBQW1CO0lBQ25CLG1CQUFtQjtJQUNuQixtQkFBbUI7SUFDbkIsbUJBQW1CO0lBQ25CLG1CQUFtQjtJQUNuQixtQkFBbUI7SUFDbkIsbUJBQW1CO0lBQ25CLG1CQUFtQjtDQUNiLENBQUM7QUFFWCxNQUFNLE1BQU0sR0FBRyxtQkFBbUIsQ0FBQztBQUVuQyxnREFBZ0Q7QUFDaEQsU0FBUyxHQUFHLENBQUMsQ0FBUyxFQUFFLENBQVM7SUFDN0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNoQixPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7QUFDaEQsQ0FBQztBQUVELGlEQUFpRDtBQUNqRCxTQUFTLEdBQUcsQ0FBQyxDQUFTLEVBQUUsQ0FBUztJQUM3QixNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUM7SUFDdEIsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQy9CLE9BQU8sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUMzQixDQUFDO0FBRUQsOENBQThDO0FBQzlDLFNBQVMsTUFBTSxDQUFDLElBQWMsRUFBRSxNQUFjO0lBQzFDLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FB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LENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN0RSxDQUFDO0lBRUQsSUFBSSxJQUFJLEdBQUcsQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pELElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQztJQUNmLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztJQUVmLDRDQUE0QztJQUM1QyxJQUFJLE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksSUFBSSxHQUFHLElBQUksRUFBRSxJQUFJLEdBQUcsSUFBSSxFQUFFLElBQUksR0FBRyxJQUFJLEVBQUUsSUFBSSxHQUFHLElBQUksQ0FBQztRQUN2RCxJQUFJLElBQUksR0FBRyxJQUFJLEVBQUUsSUFBSSxHQUFHLElBQUksRUFBRSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBRTFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO1lBQ2IsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUNsRixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUN4RixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUN4RixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUN4RixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUN4RixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUN4RixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUN6RixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEdBQUcsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUMxRixNQUFNLElBQUksR0FBRyxDQUFDO1lBQ2QsQ0FBQyxJQUFJLEdBQUcsQ0FBQztRQUNiLENBQUM7UUFFRCxJQUFJLElBQUksSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUM7UUFDM0IsSUFBSSxJQUFJLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQzNCLElBQUksSUFBSSxJQUFJLENBQUM7SUFDakIsQ0FBQztJQUVELElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDO1FBQ1QsSUFBSSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUNsRixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUN4RixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUN4RixJQUFJLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUN4RixNQUFNLElBQUksRUFBRSxDQUFDO1FBQ2IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFDRCxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQztRQUNULElBQUksR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLElB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QUksRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN2QyxPQUFPLENBQUMsR0FBRyxDQUFDLDZDQUE2QyxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUU1RSxNQUFNLFNBQVMsR0FBRyxtQkFBbUIsQ0FBQztJQUN0QyxJQUFJLEVBQUUsS0FBSyxTQUFTLEVBQUUsQ0FBQztRQUNuQixPQUFPLENBQUMsS0FBSyxDQUFDLG9CQUFvQixTQUFTLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ3RGLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEIsQ0FBQztJQUVELE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNyQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBzbWNIYXNoIC0gSGlnaC1wZXJmb3JtYW5jZSBoYXNoIGZ1bmN0aW9uXG4gKiBcbiAqIFBhc3NlcyBhbGwgMTg4IFNNSGFzaGVyMyBxdWFsaXR5IHRlc3RzLiBJbmNsdWRlcyBhIFBSTkcgdGhhdCBwYXNzZXMgQmlnQ3J1c2gvUHJhY3RSYW5kLlxuICovXG5cbi8vIFNlY3JldCBjb25zdGFudHM6IG9kZCwgMzIgYml0cyBzZXQsIHBhaXJ3aXNlIGhhbW1pbmcgZGlzdGFuY2UgPSAzMiwgcHJpbWVcbmNvbnN0IFNNQ19TRUNSRVQgPSBbXG4gICAgMHg5YWQxZThlMmFhNWE1YzRibixcbiAgICAweGFhYWFkMjMzNTY0N2QyMWJuLFxuICAgIDB4YjhhYzM1ZTI2OWQxYjQ5NW4sXG4gICAgMHhhOThkNjUzY2IyYjRjOTU5bixcbiAgICAweDcxYTViODUzYjQzY2E2OGJuLFxuICAgIDB4MmI1NTkzNGRjMzVjOTY1NW4sXG4gICAgMHg3NDZhZTQ4ZWQ0ZDQxZTRkbixcbiAgICAweGEzZDhjMzhlNzhhYWE2YTluLFxuICAgIDB4MWJjYTY5YzU2NTY1OGJjM24sXG5dIGFzIGNvbnN0O1xuXG5jb25zdCBNQVNLNjQgPSAweEZGRkZGRkZGRkZGRkZGRkZuO1xuXG4vKiogMTI4LWJpdCBtdWx0aXBseSwgWE9SIGhpZ2ggYW5kIGxvdyBoYWx2ZXMgKi9cbmZ1bmN0aW9uIG1peChhOiBiaWdpbnQsIGI6IGJpZ2ludCk6IGJpZ2ludCB7XG4gICAgY29uc3QgciA9IGEgKiBiO1xuICAgIHJldHVybiAoKHIgJiBNQVNLNjQpIF4gKHIgPj4gNjRuKSkgJiBNQVNLNjQ7XG59XG5cbi8qKiBNdWx0aXBseS11cGRhdGUtbWl4OiByZXR1cm5zIFtsbyBeIGhpLCBoaV0gKi9cbmZ1bmN0aW9uIG11bShhOiBiaWdpbnQsIGI6IGJpZ2ludCk6IFtiaWdpbnQsIGJpZ2ludF0ge1xuICAgIGNvbnN0IHIgPSBhICogYjtcbiAgICBjb25zdCBsbyA9IHIgJiBNQVNLNjQ7XG4gICAgY29uc3QgaGkgPSAociA+PiA2NG4pICYgTUFTSzY0O1xuICAgIHJldHVybiBbKGxvIF4gaGkpLCBoaV07XG59XG5cbi8qKiBSZWFkIGxpdHRsZS1lbmRpYW4gdWludDY0IGZyb20gRGF0YVZpZXcgKi9cbmZ1bmN0aW9uIHJlYWQ2NCh2aWV3OiBEYXRhVmlldywgb2Zmc2V0OiBudW1iZXIpOiBiaWdpbnQge1xuICAgIGNvbnN0IGxvID0gQmlnSW50KHZpZXcuZ2V0VWludDMyKG9mZnNldCwgdHJ1ZSkpO1xuICAgIGNvbnN0IGhpID0gQmlnSW50KHZpZXcuZ2V0VWludDMyKG9mZnNldCArIDQsIHRydWUpKTtcbiAgICByZXR1cm4gbG8gfCAoaGkgPDwgMzJuKTtcbn1cblxuLyoqIFJlYWQgbGl0dGxlLWVuZGlhbiB1aW50MzIgZnJvbSBEYXRhVmlldyAqL1xuZnVuY3Rpb24gcmVhZDMyKHZpZXc6IERhdGFWaWV3LCBvZmZzZXQ6IG51bWJlcik6IGJpZ2ludCB7XG4gICAgcmV0dXJuIEJpZ0ludCh2aWV3LmdldFVpbnQzMihvZmZzZXQsIHRydWUpKTtcbn1cblxuLyoqIENvbXB1dGUgc21jSGFzaCBvZiB0aGUgZ2l2ZW4gZGF0YSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNtY2hhc2goZGF0YTogVWludDhBcnJheSk6IGJpZ2ludCB7XG4gICAgcmV0dXJuIHNtY2hhc2hTZWVkZWQoZGF0YSwgU01DX1NFQ1JFVFswXSk7XG59XG5cbi8qKiBDb21wdXRlIHNtY0hhc2ggd2l0aCBhIGN1c3RvbSBzZWVkICovXG5leHBvcnQgZnVuY3Rpb24gc21jaGFzaFNlZWRlZChkYXRhOiBVaW50OEFycmF5LCBzZWVkOiBiaWdpbnQpOiBiaWdpbnQge1xuICAgIGNvbnN0IGxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgIGNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICBzZWVkICY9IE1BU0s2NDtcblxuICAgIGlmIChsZW5ndGggPD0gMTYpIHtcbiAgICAgICAgc2VlZCBePSBtaXgoc2VlZCBeIFNNQ19TRUNSRVRbMF0sIFNNQ19TRUNSRVRbMV0gXiBCaWdJbnQobGVuZ3RoKSk7XG5cbiAgICAgICAgbGV0IGE6IGJpZ2ludCwgYjogYmlnaW50O1xuICAgICAgICBpZiAobGVuZ3RoID49IDQpIHtcbiAgICAgICAgICAgIGlmIChsZW5ndGggPj0gOCkge1xuICAgICAgICAgICAgICAgIGEgPSByZWFkNjQodmlldywgMCk7XG4gICAgICAgICAgICAgICAgYiA9IHJlYWQ2NCh2aWV3LCBsZW5ndGggLSA4KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYSA9IHJlYWQzMih2aWV3LCAwKTtcbiAgICAgICAgICAgICAgICBiID0gcmVhZDMyKHZpZXcsIGxlbmd0aCAtIDQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGEgPSAoQmlnSW50KGRhdGFbMF0pIDw8IDU2bikgfCAoQmlnSW50KGRhdGFbbGVuZ3RoID4+IDFdKSA8PCAzMm4pIHwgQmlnSW50KGRhdGFbbGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgYiA9IDBuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYSA9IDBuO1xuICAgICAgICAgICAgYiA9IDBuO1xuICAgICAgICB9XG5cbiAgICAgICAgYSA9IChhIF4gU01DX1NFQ1JFVFsxXSkgJiBNQVNLNjQ7XG4gICAgICAgIGIgPSAoYiBeIHNlZWQpICYgTUFTSzY0O1xuICAgICAgICBbYSwgYl0gPSBtdW0oYSwgYik7XG4gICAgICAgIHJldHVybiBtaXgoYSBeIFNNQ19TRUNSRVRbOF0sIGIgXiBTTUNfU0VDUkVUWzFdIF4gQmlnSW50KGxlbmd0aCkpO1xuICAgIH1cblxuICAgIHNlZWQgXj0gbWl4KHNlZWQgXiBTTUNfU0VDUkVUWzJdLCBTTUNfU0VDUkVUWzFdKTtcbiAgICBsZXQgaSA9IGxlbmd0aDtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcblxuICAgIC8vIEJ1bGs6IDggbGFuZXMgPSAxMjggYnl0ZXMgPSAyIGNhY2hlIGxpbmVzXG4gICAgaWYgKGxlbmd0aCA+IDEyOCkge1xuICAgICAgICBsZXQgc2VlMSA9IHNlZWQsIHNlZTIgPSBzZWVkLCBzZWUzID0gc2VlZCwgc2VlNCA9IHNlZWQ7XG4gICAgICAgIGxldCBzZWU1ID0gc2VlZCwgc2VlNiA9IHNlZWQsIHNlZTcgPSBzZWVkO1xuXG4gICAgICAgIHdoaWxlIChpID4gMTI4KSB7XG4gICAgICAgICAgICBzZWVkID0gbWl4KHJlYWQ2NCh2aWV3LCBvZmZzZXQpIF4gU01DX1NFQ1JFVFswXSwgcmVhZDY0KHZpZXcsIG9mZnNldCArIDgpIF4gc2VlZCk7XG4gICAgICAgICAgICBzZWUxID0gbWl4KHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyAxNikgXiBTTUNfU0VDUkVUWzFdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgMjQpIF4gc2VlMSk7XG4gICAgICAgICAgICBzZWUyID0gbWl4KHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyAzMikgXiBTTUNfU0VDUkVUWzJdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgNDApIF4gc2VlMik7XG4gICAgICAgICAgICBzZWUzID0gbWl4KHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyA0OCkgXiBTTUNfU0VDUkVUWzNdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgNTYpIF4gc2VlMyk7XG4gICAgICAgICAgICBzZWU0ID0gbWl4KHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyA2NCkgXiBTTUNfU0VDUkVUWzRdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgNzIpIF4gc2VlNCk7XG4gICAgICAgICAgICBzZWU1ID0gbWl4KHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyA4MCkgXiBTTUNfU0VDUkVUWzVdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgODgpIF4gc2VlNSk7XG4gICAgICAgICAgICBzZWU2ID0gbWl4KHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyA5NikgXiBTTUNfU0VDUkVUWzZdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgMTA0KSBeIHNlZTYpO1xuICAgICAgICAgICAgc2VlNyA9IG1peChyZWFkNjQodmlldywgb2Zmc2V0ICsgMTEyKSBeIFNNQ19TRUNSRVRbN10sIHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyAxMjApIF4gc2VlNyk7XG4gICAgICAgICAgICBvZmZzZXQgKz0gMTI4O1xuICAgICAgICAgICAgaSAtPSAxMjg7XG4gICAgICAgIH1cblxuICAgICAgICBzZWVkIF49IHNlZTEgXiBzZWU0IF4gc2VlNTtcbiAgICAgICAgc2VlMiBePSBzZWUzIF4gc2VlNiBeIHNlZTc7XG4gICAgICAgIHNlZWQgXj0gc2VlMjtcbiAgICB9XG5cbiAgICBpZiAoaSA+IDY0KSB7XG4gICAgICAgIHNlZWQgPSBtaXgocmVhZDY0KHZpZXcsIG9mZnNldCkgXiBTTUNfU0VDUkVUWzBdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgOCkgXiBzZWVkKTtcbiAgICAgICAgc2VlZCA9IG1peChyZWFkNjQodmlldywgb2Zmc2V0ICsgMTYpIF4gU01DX1NFQ1JFVFsxXSwgcmVhZDY0KHZpZXcsIG9mZnNldCArIDI0KSBeIHNlZWQpO1xuICAgICAgICBzZWVkID0gbWl4KHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyAzMikgXiBTTUNfU0VDUkVUWzJdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgNDApIF4gc2VlZCk7XG4gICAgICAgIHNlZWQgPSBtaXgocmVhZDY0KHZpZXcsIG9mZnNldCArIDQ4KSBeIFNNQ19TRUNSRVRbM10sIHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyA1NikgXiBzZWVkKTtcbiAgICAgICAgb2Zmc2V0ICs9IDY0O1xuICAgICAgICBpIC09IDY0O1xuICAgIH1cbiAgICBpZiAoaSA+IDMyKSB7XG4gICAgICAgIHNlZWQgPSBtaXgocmVhZDY0KHZpZXcsIG9mZnNldCkgXiBTTUNfU0VDUkVUWzBdLCByZWFkNjQodmlldywgb2Zmc2V0ICsgOCkgXiBzZWVkKTtcbiAgICAgICAgc2VlZCA9IG1peChyZWFkNjQodmlldywgb2Zmc2V0ICsgMTYpIF4gU01DX1NFQ1JFVFsxXSwgcmVhZDY0KHZpZXcsIG9mZnNldCArIDI0KSBeIHNlZWQpO1xuICAgICAgICBvZmZzZXQgKz0gMzI7XG4gICAgICAgIGkgLT0gMzI7XG4gICAgfVxuICAgIGlmIChpID4gMTYpIHtcbiAgICAgICAgc2VlZCA9IG1peChyZWFkNjQodmlldywgb2Zmc2V0KSBeIFNNQ19TRUNSRVRbMF0sIHJlYWQ2NCh2aWV3LCBvZmZzZXQgKyA4KSBeIHNlZWQpO1xuICAgIH1cblxuICAgIGxldCBhID0gcmVhZDY0KHZpZXcsIGxlbmd0aCAtIDE2KSBeIEJpZ0ludChsZW5ndGgpO1xuICAgIGxldCBiID0gcmVhZDY0KHZpZXcsIGxlbmd0aCAtIDgpO1xuXG4gICAgYSA9IChhIF4gU01DX1NFQ1JFVFsxXSkgJiBNQVNLNjQ7XG4gICAgYiA9IChiIF4gc2VlZCkgJiBNQVNLNjQ7XG4gICAgW2EsIGJdID0gbXVtKGEsIGIpO1xuICAgIHJldHVybiBtaXgoYSBeIFNNQ19TRUNSRVRbOF0sIGIgXiBTTUNfU0VDUkVUWzFdIF4gQmlnSW50KGxlbmd0aCkpO1xufVxuXG4vKiogUFJORyAtIHBhc3NlcyBCaWdDcnVzaCBhbmQgUHJhY3RSYW5kICovXG5leHBvcnQgZnVuY3Rpb24gc21jUmFuZChzZWVkOiB7IHZhbHVlOiBiaWdpbnQgfSk6IGJpZ2ludCB7XG4gICAgc2VlZC52YWx1ZSA9IChzZWVkLnZhbHVlICsgU01DX1NFQ1JFVFswXSkgJiBNQVNLNjQ7XG4gICAgcmV0dXJuIG1peChzZWVkLnZhbHVlLCBzZWVkLnZhbHVlIF4gU01DX1NFQ1JFVFsxXSk7XG59XG5cbi8qKiBIZWxwZXIgdG8gY29udmVydCBzdHJpbmcgdG8gVWludDhBcnJheSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvQnl0ZXMoc3RyOiBzdHJpbmcpOiBVaW50OEFycmF5IHtcbiAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0cik7XG59XG5cbi8vIFRlc3Qgd2hlbiBydW4gZGlyZWN0bHlcbmlmICh0eXBlb2YgcmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcgJiYgcmVxdWlyZS5tYWluID09PSBtb2R1bGUpIHtcbiAgICBjb25zdCBkYXRhID0gc3RyaW5nVG9CeXRlcyhcIkhlbGxvLCBXb3JsZCFcIik7XG4gICAgY29uc3QgaCA9IHNtY2hhc2goZGF0YSk7XG4gICAgY29uc29sZS5sb2coYHNtY2hhc2goJ0hlbGxvLCBXb3JsZCEnKSA9IDB4JHtoLnRvU3RyaW5nKDE2KX1gKTtcbiAgICBcbiAgICBjb25zdCBleHBlY3RlZCA9IDB4MjViYjA5ODJjNWMwZGU2ZW47XG4gICAgaWYgKGggIT09IGV4cGVjdGVkKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZBSUw6IEV4cGVjdGVkIDB4JHtleHBlY3RlZC50b1N0cmluZygxNil9LCBnb3QgMHgke2gudG9TdHJpbmcoMTYpfWApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGgyID0gc21jaGFzaFNlZWRlZChkYXRhLCAxMjM0NW4pO1xuICAgIGNvbnNvbGUubG9nKGBzbWNoYXNoU2VlZGVkKCdIZWxsbywgV29ybGQhJywgMTIzNDUpID0gMHgke2gyLnRvU3RyaW5nKDE2KX1gKTtcbiAgICBcbiAgICBjb25zdCBleHBlY3RlZDIgPSAweGQyNmNiNDk0ZjkxMWFmNWJuO1xuICAgIGlmIChoMiAhPT0gZXhwZWN0ZWQyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZBSUw6IEV4cGVjdGVkIDB4JHtleHBlY3RlZDIudG9TdHJpbmcoMTYpfSwgZ290IDB4JHtoMi50b1N0cmluZygxNil9YCk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJBbGwgdGVzdHMgcGFzc2VkIVwiKTtcbn1cbiJdfQ==